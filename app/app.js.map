{"version":3,"file":"app.js","sources":["src/helpers/context_menu.js","src/helpers/external_links.js","src/core/methods.js","src/app.js"],"sourcesContent":["// This gives you default context menu (cut, copy, paste)\n// in all input fields and textareas across your app.\n\nimport { remote } from 'electron';\n\nconst Menu = remote.Menu;\nconst MenuItem = remote.MenuItem;\n\nconst isAnyTextSelected = () => {\n  return window.getSelection().toString() !== '';\n};\n\nconst cut = new MenuItem({\n  label: 'Cut',\n  click: () => {\n    document.execCommand('cut');\n  },\n});\n\nconst copy = new MenuItem({\n  label: 'Copy',\n  click: () => {\n    document.execCommand('copy');\n  },\n});\n\nconst paste = new MenuItem({\n  label: 'Paste',\n  click: () => {\n    document.execCommand('paste');\n  },\n});\n\nconst normalMenu = new Menu();\nnormalMenu.append(copy);\n\nconst textEditingMenu = new Menu();\ntextEditingMenu.append(cut);\ntextEditingMenu.append(copy);\ntextEditingMenu.append(paste);\n\ndocument.addEventListener('contextmenu', (event) => {\n  switch (event.target.nodeName) {\n    case 'TEXTAREA':\n    case 'INPUT':\n      event.preventDefault();\n      textEditingMenu.popup(remote.getCurrentWindow());\n      break;\n    default:\n      if (isAnyTextSelected()) {\n        event.preventDefault();\n        normalMenu.popup(remote.getCurrentWindow());\n      }\n  }\n}, false);\n","// Convenient way for opening links in external browser, not in the app.\n// Useful especially if you have a lot of links to deal with.\n//\n// Usage:\n//\n// Every link with class \".js-external-link\" will be opened in external browser.\n// <a class=\"js-external-link\" href=\"http://google.com\">google</a>\n//\n// The same behaviour for many links can be achieved by adding\n// this class to any parent tag of an anchor tag.\n// <p class=\"js-external-link\">\n//    <a href=\"http://google.com\">google</a>\n//    <a href=\"http://bing.com\">bing</a>\n// </p>\n\nimport { shell } from 'electron';\n\nconst supportExternalLinks = (event) => {\n  let href;\n  let isExternal = false;\n\n  const checkDomElement = (element) => {\n    if (element.nodeName === 'A') {\n      href = element.getAttribute('href');\n    }\n    if (element.classList.contains('js-external-link')) {\n      isExternal = true;\n    }\n    if (href && isExternal) {\n      shell.openExternal(href);\n      event.preventDefault();\n    } else if (element.parentElement) {\n      checkDomElement(element.parentElement);\n    }\n  };\n\n  checkDomElement(event.target);\n};\n\ndocument.addEventListener('click', supportExternalLinks, false);\n","export const methods = (() => {\n\treturn {\n\t\t/*insert: (db,args) => {\n\t\t\t\t//var reg = [].shift.apply(args);\n\t\t\t\tvar animal = args.animals,\n\t\t\t\t\tfeedback = {type: 'success',message: 'inserted'};\n\t\t\t\treturn;\n\t\t\t\tdb.insert(animal,function(err,doc){\n\t\t\t\t\t// callback err\n\t\t\t\t\t// doc new reg\n\t\t\t\t\tfeedback = {type: 'error',message: err}\n\t\t\t\t});\n\t\t\t\treturn feedback;\n\t\t\t},\n\t\t\tremove: (db,args) => {\n\n\t\t\t},*/\n\t\tinsertAnimal: (db,args) => {\n\t\t\tconsole.log('insertAnimal');\n\t\t\tvar animal = args.animal;\n\t\t\tdb.insert(animal,function(err,doc){\n\t\t\t\t// callback err\n\t\t\t\t// doc new reg\n\t\t\t});\n\t\t},\n\t\topenAnimal: (db,args) => {\n\t\t\t//args._id || return; \n\t\t\tdb.findOne(args,function(err,doc){\n\t\t\t\tif(doc._id)\n\t\t\t\t\troutes.single(doc)\n\t\t\t\telse\n\t\t\t\t\terrors.message('_id not found');\n\t\t\t});\n\t\t}\n\t}\n})();\n\nexport const forms = (() => {\n\treturn {\n\t\tanimal: {\n\t\t\tregister: () => {\n\t\t\t\tvar animal,\tid, ring, month, year, grade, race, mark;\n\t\t\t\tid    = getValueOrNullByName('id')\n\t\t\t\tring  = getValueOrNullByName('ring');\n\t\t\t\tmonth = getValueOrNullByName('month');\n\t\t\t\tyear  = getValueOrNullByName('year');\n\t\t\t\tgrade = getValueOrNullByName('grade');\n\t\t\t\trace  = getValueOrNullByName('race');\n\t\t\t\tmark  = getValueOrNullByName('mark');\n\t\t\t\tanimal = {\n\t\t\t\t\tid: id,\n\t\t\t\t\tring: ring,\n\t\t\t\t\tborn: {\n\t\t\t\t\t\tmonth: month,\n\t\t\t\t\t\tyear: year\n\t\t\t\t\t},\n\t\t\t\t\tgrade: grade,\n\t\t\t\t\trace: race,\n\t\t\t\t\tmark: mark\n\t\t\t\t}\n\t\t\t\treturn animal;\n\t\t\t}\n\t\t}\n\t}\n})();\n\nexport const routes = (() => {\n\treturn {\n\t\tsingle: (doc) => {\n\t\t\tvisuals.page.single(doc)\n\t\t},\n\t\tregister: () => {\n\t\t\tvisuals.page.register();\n\t\t}\n\t}\n})();\n\nexport const errors = (() => {\n\treturn {\n\t\tmessage: (message) => {\n\t\t\tconsole.log(message);\n\t\t}\n\t}\n})();\n\nexport const visuals = (() => {\n\treturn {\n\t\tpage: {\n\t\t\tsingle: (doc) => {\n\t\t\t\tconsole.log('page single',doc._id);\n\t\t\t\tvar html = '<div id=\"single\"><table><tbody><tr><td>id</td><td>xx</td></tr><tr><td>ring</td><td>xx</td></tr><tr><td>month</td><td>xx</td></tr><tr><td>year</td><td>xx</td></tr><tr><td>grade</td><td>xx</td></tr><tr><td>race</td><td>xx</td></tr><tr><td>mark</td><td>xx</td></tr></tbody></table></div>';\n\t\t\t\trenderString(html,'main');\n\t\t\t},\n\t\t\tregister: () => {\n\t\t\t\tvar html = '<div id=\"register\"><form action=\"/\" id=\"form-animal\"><input type=\"text\" name=\"ring\" value=\"999\"><input type=\"text\" name=\"month\" value=\"9\"><input type=\"text\" name=\"year\" value=\"2015\"><input type=\"text\" name=\"grade\" value=\"1\"><input type=\"text\" name=\"race\" value=\"2\"><input type=\"text\" name=\"mark\" value=\"3\"><input type=\"submit\" value=\"enviar\"></form></div>';\n\t\t\t\trenderString(html,'main');\n\t\t\t}\n\t\t}\n\t}\n})();\n\nconst getValueOrNullByName = (name) => {\n\tvar element = document.getElementsByName(name);\n\treturn (element[0] != undefined) ? element[0].value : null;\n}\n\nconst renderString = (contentHtmlAsString,targetElementId) => {\n\tvar element = document.getElementById(targetElementId);\n\telement.innerHTML = contentHtmlAsString;\n}","// Here is the starting point for your application code.\n\n// Small helpers you might want to keep\nimport './helpers/context_menu.js';\nimport './helpers/external_links.js';\nimport { methods } from './core/methods';\nimport { routes } from './core/methods';\nimport { errors } from './core/methods';\nimport { visuals } from './core/methods';\nimport { forms } from './core/methods';\n\n// using dom-delegate for event delegate\nvar Delegate = require('dom-delegate');\n// using nedb for database storage\nvar Datastore = require('nedb'),\n\tdb = new Datastore({\n\t\tfilename: 'database/main.db'\n\t});\n\tdb.loadDatabase(function(){\n\t\n\t});\n\t//console.log(dba);\n\t//console.log(dba.exec);\n\t/*animal.insert(db,{\n\t\t\tanimals: {\n\t\t\t\tid: 100,\n\t\t\t\tring: 1000,\n\t\t\t\tborn: {\n\t\t\t\t\tmonth: 10,\n\t\t\t\t\tyear: 2016\n\t\t\t\t},\n\t\t\t\tgrade: 1,\n\t\t\t\trace: 1,\n\t\t\t\tmark: 1\n\t\t\t}\n\t\t}\n\t);\n\t\n\tmethods.openAnimal(db,{\n\t\t\t_id: 'FHq9FWAc3vxExVxT'\n\t\t}\n\t);*/\n\nconst events = () => {\n\treturn {\n\t\tlinks: () => {\n\t\t\tlet delegate = new Delegate(document);\n\t\t\tdelegate.on('click','.link',(event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tlet target = event.target;\n\t\t\t\tlet data = target.getAttribute('data-args') || null;\n\t\t\t\tif(Array.isArray(data)){\n\t\t\t\t\tdata = data[0] && JSON.parse(data[0]);\n\t\t\t\t}else{\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\t\t\t\troutes[data.route](data);\n\t\t\t});\n\t\t},\n\t\tforms: () => {\n\t\t\tlet main = document.getElementById('main');\n\t\t\tlet delegate = new Delegate(main);\n\t\t\tdelegate.on('click','input',(event) => {\n\t\t\t\tconsole.log('input');\n\t\t\t});\n\t\t\tdelegate.on('submit','#form-animal',(event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tvar animal = forms.animal.register();\n\t\t\t\tmethods.insertAnimal(db,{\n\t\t\t\t\tanimal: animal\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t}\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n\tevents().forms();\n\tevents().links();\n});\n\n// ---------------------------------------------------------------------------\n// All stuff below is just to show you how it works. You can delete all of it.\n/*import { remote } from 'electron';\nimport jetpack from 'fs-jetpack';\nimport { greet } from './hello_world/hello_world';\nimport env from './env';\n\nconst app = remote.app;\nconst appDir = jetpack.cwd(app.getAppPath());\n\n// Holy crap! This is browser window with HTML and stuff, but I can read\n// here files form disk like it's node.js! Welcome to Electron world :)\nconst manifest = appDir.read('package.json', 'json');\n\nconst osMap = {\n  win32: 'Windows',\n  darwin: 'macOS',\n  linux: 'Linux',\n};\n\ndocument.querySelector('#greet').innerHTML = greet();\ndocument.querySelector('#os').innerHTML = osMap[process.platform];\ndocument.querySelector('#author').innerHTML = manifest.author;\ndocument.querySelector('#env').innerHTML = env.name;\ndocument.querySelector('#electron-version').innerHTML = process.versions.electron;\n*/"],"names":["remote","shell"],"mappings":";;;;AAAA;;;AAGA,AAEA,MAAM,IAAI,GAAGA,eAAM,CAAC,IAAI,CAAC;AACzB,MAAM,QAAQ,GAAGA,eAAM,CAAC,QAAQ,CAAC;;AAEjC,MAAM,iBAAiB,GAAG,MAAM;EAC9B,OAAO,MAAM,CAAC,YAAY,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,CAAC;CAChD,CAAC;;AAEF,MAAM,GAAG,GAAG,IAAI,QAAQ,CAAC;EACvB,KAAK,EAAE,KAAK;EACZ,KAAK,EAAE,MAAM;IACX,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;GAC7B;CACF,CAAC,CAAC;;AAEH,MAAM,IAAI,GAAG,IAAI,QAAQ,CAAC;EACxB,KAAK,EAAE,MAAM;EACb,KAAK,EAAE,MAAM;IACX,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;GAC9B;CACF,CAAC,CAAC;;AAEH,MAAM,KAAK,GAAG,IAAI,QAAQ,CAAC;EACzB,KAAK,EAAE,OAAO;EACd,KAAK,EAAE,MAAM;IACX,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;GAC/B;CACF,CAAC,CAAC;;AAEH,MAAM,UAAU,GAAG,IAAI,IAAI,EAAE,CAAC;AAC9B,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;AAExB,MAAM,eAAe,GAAG,IAAI,IAAI,EAAE,CAAC;AACnC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAC5B,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC7B,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;AAE9B,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,KAAK,KAAK;EAClD,QAAQ,KAAK,CAAC,MAAM,CAAC,QAAQ;IAC3B,KAAK,UAAU,CAAC;IAChB,KAAK,OAAO;MACV,KAAK,CAAC,cAAc,EAAE,CAAC;MACvB,eAAe,CAAC,KAAK,CAACA,eAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC;MACjD,MAAM;IACR;MACE,IAAI,iBAAiB,EAAE,EAAE;QACvB,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,UAAU,CAAC,KAAK,CAACA,eAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC;OAC7C;GACJ;CACF,EAAE,KAAK,CAAC,CAAC;;ACtDV;;;;;;;;;;;;;;;AAeA,AAEA,MAAM,oBAAoB,GAAG,CAAC,KAAK,KAAK;EACtC,IAAI,IAAI,CAAC;EACT,IAAI,UAAU,GAAG,KAAK,CAAC;;EAEvB,MAAM,eAAe,GAAG,CAAC,OAAO,KAAK;IACnC,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;MAC5B,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;KACrC;IACD,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;MAClD,UAAU,GAAG,IAAI,CAAC;KACnB;IACD,IAAI,IAAI,IAAI,UAAU,EAAE;MACtBC,cAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;MACzB,KAAK,CAAC,cAAc,EAAE,CAAC;KACxB,MAAM,IAAI,OAAO,CAAC,aAAa,EAAE;MAChC,eAAe,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;KACxC;GACF,CAAC;;EAEF,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;CAC/B,CAAC;;AAEF,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,oBAAoB,EAAE,KAAK,CAAC,CAAC;;ACvCzD,MAAM,OAAO,GAAG,CAAC,MAAM;CAC7B,OAAO;;;;;;;;;;;;;;;;EAgBN,YAAY,EAAE,CAAC,EAAE,CAAC,IAAI,KAAK;GAC1B,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;GAC5B,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;GACzB,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,GAAG,CAAC;;;IAGjC,CAAC,CAAC;GACH;EACD,UAAU,EAAE,CAAC,EAAE,CAAC,IAAI,KAAK;;GAExB,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,CAAC;IAChC,GAAG,GAAG,CAAC,GAAG;KACT,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;;KAElB,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;IACjC,CAAC,CAAC;GACH;EACD;CACD,GAAG,CAAC;;AAEL,AAAO,MAAM,KAAK,GAAG,CAAC,MAAM;CAC3B,OAAO;EACN,MAAM,EAAE;GACP,QAAQ,EAAE,MAAM;IACf,IAAI,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC;IACrD,EAAE,MAAM,oBAAoB,CAAC,IAAI,CAAC,CAAA;IAClC,IAAI,IAAI,oBAAoB,CAAC,MAAM,CAAC,CAAC;IACrC,KAAK,GAAG,oBAAoB,CAAC,OAAO,CAAC,CAAC;IACtC,IAAI,IAAI,oBAAoB,CAAC,MAAM,CAAC,CAAC;IACrC,KAAK,GAAG,oBAAoB,CAAC,OAAO,CAAC,CAAC;IACtC,IAAI,IAAI,oBAAoB,CAAC,MAAM,CAAC,CAAC;IACrC,IAAI,IAAI,oBAAoB,CAAC,MAAM,CAAC,CAAC;IACrC,MAAM,GAAG;KACR,EAAE,EAAE,EAAE;KACN,IAAI,EAAE,IAAI;KACV,IAAI,EAAE;MACL,KAAK,EAAE,KAAK;MACZ,IAAI,EAAE,IAAI;MACV;KACD,KAAK,EAAE,KAAK;KACZ,IAAI,EAAE,IAAI;KACV,IAAI,EAAE,IAAI;KACV,CAAA;IACD,OAAO,MAAM,CAAC;IACd;GACD;EACD;CACD,GAAG,CAAC;;AAEL,AAAO,MAAM,MAAM,GAAG,CAAC,MAAM;CAC5B,OAAO;EACN,MAAM,EAAE,CAAC,GAAG,KAAK;GAChB,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;GACxB;EACD,QAAQ,EAAE,MAAM;GACf,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;GACxB;EACD;CACD,GAAG,CAAC;;AAEL,AAAO,MAAM,MAAM,GAAG,CAAC,MAAM;CAC5B,OAAO;EACN,OAAO,EAAE,CAAC,OAAO,KAAK;GACrB,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;GACrB;EACD;CACD,GAAG,CAAC;;AAEL,AAAO,MAAM,OAAO,GAAG,CAAC,MAAM;CAC7B,OAAO;EACN,IAAI,EAAE;GACL,MAAM,EAAE,CAAC,GAAG,KAAK;IAChB,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACnC,IAAI,IAAI,GAAG,8RAA8R,CAAC;IAC1S,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC1B;GACD,QAAQ,EAAE,MAAM;IACf,IAAI,IAAI,GAAG,qWAAqW,CAAC;IACjX,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC1B;GACD;EACD;CACD,GAAG,CAAC;;AAEL,MAAM,oBAAoB,GAAG,CAAC,IAAI,KAAK;CACtC,IAAI,OAAO,GAAG,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;CAC/C,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,SAAS,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;CAC3D,CAAA;;AAED,MAAM,YAAY,GAAG,CAAC,mBAAmB,CAAC,eAAe,KAAK;CAC7D,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;CACvD,OAAO,CAAC,SAAS,GAAG,mBAAmB,CAAC;CACxC;;AC7GD;;;AAGA,AACA,AACA,AACA,AACA,AACA,AACA,AAEA;AACA,IAAI,QAAQ,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;;AAEvC,IAAI,SAAS,GAAG,OAAO,CAAC,MAAM,CAAC;IAC9B,EAAE,GAAG,IAAI,SAAS,CAAC;EAClB,QAAQ,EAAE,kBAAkB;EAC5B,CAAC,CAAC;CACH,EAAE,CAAC,YAAY,CAAC,UAAU;;EAEzB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;AAuBJ,MAAM,MAAM,GAAG,MAAM;CACpB,OAAO;EACN,KAAK,EAAE,MAAM;GACZ,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC;GACtC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;IACtC,KAAK,CAAC,cAAc,EAAE,CAAC;IACvB,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;IAC1B,IAAI,IAAI,GAAG,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC;IACpD,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACtB,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KACtC,IAAI;KACJ,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACxB;IACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;IACzB,CAAC,CAAC;GACH;EACD,KAAK,EAAE,MAAM;GACZ,IAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;GAC3C,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;GAClC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;IACtC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACrB,CAAC,CAAC;GACH,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,KAAK,KAAK;IAC9C,KAAK,CAAC,cAAc,EAAE,CAAC;IACvB,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;IACrC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC;KACvB,MAAM,EAAE,MAAM;KACd,CAAC,CAAC;IACH,OAAO,KAAK,CAAC;IACb,CAAC,CAAC;GACH;EACD;CACD,CAAA;AACD,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;CACnD,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC;CACjB,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC;CACjB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;"}